!!!
%html( ng-app="spokenvote" )
  %head
    %meta( name="fragment" content="!" )
    %meta( charset="utf-8" )
    %meta( http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" )
    %title= content_for?(:title) ? yield(:title) : "SpokenVote"

    %meta( name='description' content='Spokenvote is a tool to help groups of any size, from a local school board to an entire nationâ€™s people, reach consensus with radical efficiency.' )
    -#%meta( content="" name="author" )

    %meta( name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0" )

    -#%link( href= '../assets/icons/touch-icon-iphone3.png' rel= 'apple-touch-icon' sizes= '57x57' )
    %link( href= '../assets/icons/touch-icon-ipad.png' rel= 'apple-touch-icon' sizes= '76x76' )
    %link( href= '../assets/icons/touch-icon-iphone-retina.png' rel= 'apple-touch-icon' sizes= '120x120' )
    %link( href= '../assets/icons/touch-icon-ipad-retina.png' rel= 'apple-touch-icon' sizes= '152x152' )
    %link( href= '../assets/icons/startup.png' rel= 'apple-touch-startup-image' sizes="640x1096" )

    %meta( name='apple-mobile-web-app-title' content='Spokenvote' )
    %meta( name='apple-mobile-web-app-capable' content='yes' )
    %meta( name='apple-mobile-web-app-status-bar-style' content='white' )

    = favicon_link_tag
    = stylesheet_link_tag 'http://fonts.googleapis.com/css?family=Open+Sans:300,400,600|Yanone+Kaffeesatz:400,600', rel: 'stylesheet', type: 'text/css'
    = stylesheet_link_tag "//cdnjs.cloudflare.com/ajax/libs/select2/3.4.5/select2.css"
    = stylesheet_link_tag "//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css", rel: 'stylesheet'
    = stylesheet_link_tag "application", :media => "all"

    = csrf_meta_tags

    = yield(:head)

  %body( ng-controller='RootCtrl' )
    .container-fluid
      .row.row-offcanvas.row-offcanvas-left( ng-class='{active: sessionSettings.actions.offcanvas}' )
        .sidebar-offcanvas.col-xs-10( role='navigation' )
          %ng-include( src="'/assets/shared/_sidebar.html'" )

        .mainCanvas.col-xs-12
          #navigationBar( role='navigation' )
            %ng-include( src="'/assets/shared/_navigation.html'" )

          #main( role='main' )
            #mainContent.container
              #alertContainer
                .pageAlert( alert-bar alertmessageclear='alertService.alertClass' ng-hide='alertService.alertDestination=="modal"' )
              %ng-view( autoscroll )

    -#- min = Rails.env.production? || Rails.env.staging? ? '.min' : ''  #Nice approach, but generally not needed
    -#                                                                   # since Chrome offers full source mapping to non-min versions.
    - min = '.min'
    = javascript_include_tag "//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery#{min}.js"
    = javascript_include_tag "//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.5.1/underscore-min.js"
    = javascript_include_tag "//cdnjs.cloudflare.com/ajax/libs/select2/3.4.5/select2#{min}.js"
    = javascript_include_tag "//code.angularjs.org/1.2.9/angular#{min}.js"
    = javascript_include_tag "//code.angularjs.org/1.2.9/angular-resource#{min}.js"
    = javascript_include_tag "//code.angularjs.org/1.2.9/angular-route#{min}.js"
    -#= javascript_include_tag "//code.angularjs.org/1.2.9/angular-mocks#{min}.js" if Rails.env.development?    # Loa
    = javascript_include_tag "//code.angularjs.org/1.2.9/angular-cookies#{min}.js"
    = javascript_include_tag "//cdnjs.cloudflare.com/ajax/libs/angular-ui-bootstrap/0.10.0/ui-bootstrap-tpls#{min}.js"
    -#= javascript_include_tag '//rawgithub.com/mgcrea/angular-strap/master/dist/angular-strap.min.js'
    -#= javascript_include_tag '//rawgithub.com/mgcrea/angular-strap/master/dist/angular-strap.tpl.min.js'
    = javascript_include_tag "//maps.googleapis.com/maps/api/js?v=3.exp&sensor=false&libraries=places"
    -#= javascript_include_tag "https://apis.google.com/js/client.js?onload=load"   # for Google Auth2
    = javascript_include_tag "application"
