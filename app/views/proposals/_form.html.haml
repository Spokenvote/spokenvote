= nested_form_for @proposal, :html => {:class => 'form-horizontal'} do |f|
  - if @proposal.errors.any?
    #error_explanation
      %h2= "#{pluralize(@proposal.errors.count, "error")} prohibited this proposal from being saved:"
      %ul
        - @proposal.errors.full_messages.each do |msg|
          %li= msg

      %h3= "#{session[:hub_filter]} AT #{session[:hub_location]}"

  %fieldset
    = f.hidden_field :user_id, :value => current_user.id
    .control-group
      = f.label :statement, :class => 'control-label'
      .controls
        = f.text_field :statement, :class => 'input-xxlarge', placeholder: 'Enter only the statement of your proposal'

    = f.fields_for :hub, @proposal.hub do |hub_form|
      .control-group
        = hub_form.label :group_name, :class => 'control-label'
        .controls
          = hidden_field_tag :group_name, nil, placeholder: 'Please choose the word or phrase that best captures this proposal'

      .control-group
        = hub_form.label :location_id, :class => 'control-label'
        .controls
          = hub_form.text_field :location_id, class: 'input-xxlarge gpSearchBox', placeholder: 'Please enter the geography to which this proposal applies'

    = f.fields_for :votes, @vote do |vote_form|
      .control-group
        = vote_form.label :votes, 'Supporting Arguments', :class => 'control-label'
        .controls
          = vote_form.text_area :comment, :class => 'input-xxlarge supporting-args', placeholder: 'Enter your explanation and reasons why others should support your proposal'
        = vote_form.hidden_field :user_id, :value => current_user.id

    .control-group
      .controls
        = f.submit controller.action_name == 'new' ? 'Create' : 'Update', class: 'btn btn-primary btn-large btn-bold'
